---
import Layout from '../layouts/Layout.astro';
import Contact from '../components/home/Contact.astro';
import { sanityFetch, urlFor } from '../lib/sanity';
import { allAuthorsQuery } from '../lib/queries';

// <!-- SCHEMA: Organization - Add JSON-LD structured data here -->
// <!-- SCHEMA: LocalBusiness / HomeAndConstructionBusiness -->

// Type definition
interface SanityAuthor {
  _id: string;
  name: string;
  slug: { current: string };
  role: string;
  image: any;
  bio: string;
}

// Fetch team members from Sanity
let sanityTeamMembers: SanityAuthor[] = [];

try {
  sanityTeamMembers = await sanityFetch<SanityAuthor[]>(allAuthorsQuery) || [];
} catch (error) {
  console.error('Error fetching team members from Sanity:', error);
}

const heroStats = [
  { value: '10+', label: 'Years Experience' },
  { value: '500+', label: 'Projects Completed' },
  { value: '100%', label: 'Satisfaction Rate' },
];

const differentiators = [
  {
    icon: 'M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z',
    title: 'What does transparent pricing mean?',
    answer: 'Transparent Pricing',
    description: 'Property Pros Drywall provides detailed, itemized estimates before any work begins. No hidden fees, no surprise charges. Central Minnesota homeowners know exactly what they\'re paying for.',
  },
  {
    icon: 'M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z',
    title: 'How experienced is your team?',
    answer: 'Experienced & Skilled Team',
    description: 'Our drywall specialists have over 10 years of experience serving the St. Cloud area. Every team member is trained in the latest techniques for installation, repair, and finishing.',
  },
  {
    icon: 'M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z',
    title: 'Can I trust Property Pros?',
    answer: 'Reliable & Trustworthy',
    description: 'Licensed, insured, and committed to showing up on time. We communicate clearly throughout every project and stand behind our work with a satisfaction guarantee.',
  },
  {
    icon: 'M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z',
    title: 'Do you prioritize customer needs?',
    answer: 'Customer-Focused Approach',
    description: 'Your satisfaction drives everything we do. We listen to your vision, respect your home, and tailor our drywall services to meet your specific needs and budget.',
  },
];

// Static fallback team members - The Spencer Brothers
const staticTeamMembers = [
  {
    name: 'Steve Spencer',
    role: 'Co-Owner & Project Manager',
    email: 'Steve@propertyprosmn.com',
    image: 'https://images.unsplash.com/photo-1560250097-0b93528c311a?w=400&q=80', // <!-- REPLACE: Steve Spencer photo -->
    alt: 'Steve Spencer - Co-Owner and Project Manager of Property Pros Drywall',
    bio: '', // <!-- REPLACE: Steve Spencer bio -->
  },
  {
    name: 'Kevin Spencer',
    role: 'Co-Owner & Operator',
    email: 'Kevin@propertyprosmn.com',
    image: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400&q=80', // <!-- REPLACE: Kevin Spencer photo -->
    alt: 'Kevin Spencer - Co-Owner and Operator of Property Pros Drywall',
    bio: '', // <!-- REPLACE: Kevin Spencer bio -->
  },
];

// Use Sanity data if available
const hasSanityTeam = sanityTeamMembers.length > 0;
---

<Layout
  title="About Property Pros Drywall | Trusted Drywall Contractors in Central Minnesota"
  description="Property Pros Drywall is Clear Lake, Minnesota's trusted drywall contractor with 10+ years serving Central MN. Professional installation, repair & finishing for St. Cloud area homes."
>
  <!-- SCHEMA: Organization -->
  <!-- SCHEMA: LocalBusiness type="HomeAndConstructionBusiness" -->

  <!-- HERO SECTION - Split Layout -->
  <section class="section-hero">
    <div class="hero-wrap">
      <!-- Left: Content -->
      <div class="hero-content">
        <!-- Label -->
        <div class="hero-badge">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
          </svg>
          About Us
        </div>

        <!-- H1 Title -->
        <h1 class="hero-title text-5xl md:text-6xl text-white">
          Building relationships, one home at a time
        </h1>

        <!-- Description with geographic qualifiers -->
        <p class="text-muted text-base max-w-lg">
          Property Pros Drywall is Central Minnesota's trusted drywall contractor, serving Clear Lake, St. Cloud, and surrounding communities. We believe in building more than walls—we build lasting relationships through honest communication, quality craftsmanship, and a commitment to exceeding expectations.
        </p>

        <!-- CTA Button -->
        <div class="mt-4">
          <a href="/contact" class="btn btn-outline-light">
            Contact Us
            <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
            </svg>
          </a>
        </div>

        <!-- Stats Row -->
        <div class="hero-stats">
          {heroStats.map((stat) => (
            <div class="hero-stat">
              <div class="hero-stat-number">{stat.value}</div>
              <div class="hero-stat-label">{stat.label}</div>
            </div>
          ))}
        </div>
      </div>

      <!-- Right: Hero Image -->
      <div class="hero-visual">
        <img
          src="https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=800&q=80"
          alt="Property Pros Drywall team installing drywall in a Central Minnesota home"
          class="hero-image"
        />
      </div>
    </div>
  </section>

  <!-- WHY CHOOSE US SECTION -->
  <section class="section section-white">
    <div class="padding-global">
      <div class="container-large">
        <!-- Section Header -->
        <div class="text-center mb-12">
          <span class="section-label">Why Choose Us</span>
          <h2 class="section-title mt-4 mb-4">Why Central Minnesota trusts Property Pros</h2>
          <p class="text-secondary max-w-2xl mx-auto">
            Homeowners and businesses throughout the St. Cloud area choose Property Pros Drywall for our commitment to quality, transparent pricing, and customer-first approach.
          </p>
        </div>

        <!-- 2x2 Expandable Cards Grid - Q&A style for AEO -->
        <div class="grid md:grid-cols-2 gap-6 max-w-4xl mx-auto">
          {differentiators.map((item) => (
            <details class="group bg-bg-primary border border-border-light rounded-xl overflow-hidden hover:shadow-lg transition-shadow">
              <summary class="flex items-center gap-4 p-6 cursor-pointer list-none">
                <div class="flex-shrink-0 w-12 h-12 bg-brand-navy rounded-lg flex items-center justify-center">
                  <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d={item.icon} />
                  </svg>
                </div>
                <div class="flex-1">
                  <h3 class="text-lg font-medium text-text-primary">{item.answer}</h3>
                </div>
                <div class="flex-shrink-0 w-8 h-8 rounded-full border border-border-light flex items-center justify-center group-open:rotate-45 transition-transform">
                  <svg class="w-4 h-4 text-text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v12m6-6H6" />
                  </svg>
                </div>
              </summary>
              <div class="px-6 pb-6 pt-0">
                <!-- Hidden Q for AEO/semantic purposes -->
                <p class="sr-only">{item.title}</p>
                <p class="text-sm text-text-secondary pl-16">{item.description}</p>
              </div>
            </details>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- OUR STORY SECTION -->
  <section class="section section-white" style="padding-top: 0;">
    <div class="padding-global">
      <div class="container-large">
        <div class="grid lg:grid-cols-2 gap-12 lg:gap-16 items-center">
          <!-- Left: Image -->
          <div class="aspect-square rounded-xl overflow-hidden">
            <img
              src="https://images.unsplash.com/photo-1560250097-0b93528c311a?w=800&q=80"
              alt="Property Pros Drywall founder serving Central Minnesota communities"
              class="w-full h-full object-cover"
            />
          </div>

          <!-- Right: Content -->
          <div>
            <span class="section-label">Our Story</span>
            <h2 class="section-title mb-6">How Property Pros Drywall began</h2>

            <div class="space-y-4 mb-8">
              <p class="text-secondary">
                Property Pros Drywall was founded in Clear Lake, Minnesota with a simple mission: to provide Central Minnesota homeowners and businesses with exceptional drywall services they can trust. What started as a small, family-focused operation has grown into one of the region's most respected drywall contractors.
              </p>
              <p class="text-secondary">
                Based in Clear Lake and serving the greater St. Cloud area, we've built our reputation on quality workmanship, honest pricing, and treating every project—whether a small repair in Sartell or a large commercial build in Waite Park—with the same level of care and attention to detail.
              </p>
              <p class="text-secondary">
                Today, our team of skilled professionals continues to uphold the values that have made us successful: integrity, craftsmanship, and an unwavering commitment to customer satisfaction across Central Minnesota.
              </p>
            </div>

            <!-- Mission Block -->
            <div class="flex items-start gap-4 p-5 bg-bg-primary rounded-xl mb-4">
              <div class="flex-shrink-0 w-12 h-12 bg-brand-navy rounded-lg flex items-center justify-center">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 10V3L4 14h7v7l9-11h-7z" />
                </svg>
              </div>
              <div>
                <h3 class="font-medium text-text-primary mb-1">Our Mission</h3>
                <p class="text-sm text-text-secondary">To deliver exceptional drywall services to Central Minnesota homes and businesses, building lasting relationships through quality craftsmanship, transparent pricing, and unwavering reliability.</p>
              </div>
            </div>

            <!-- Values Block -->
            <div class="flex items-start gap-4 p-5 bg-bg-primary rounded-xl">
              <div class="flex-shrink-0 w-12 h-12 bg-brand-navy rounded-lg flex items-center justify-center">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                </svg>
              </div>
              <div>
                <h3 class="font-medium text-text-primary mb-1">Our Values</h3>
                <p class="text-sm text-text-secondary">Integrity in every interaction. Quality in every detail. Respect for your home, your time, and your investment. These principles guide every project we undertake.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- MEET THE OWNERS SECTION -->
  <section class="section section-dark">
    <div class="padding-global">
      <div class="container-large">
        <div class="grid lg:grid-cols-2 gap-12 lg:gap-16 items-center">
          <!-- Left: Content -->
          <div>
            <span class="section-label">Our Team</span>
            <h2 class="section-title text-white mb-6">The Spencer Brothers</h2>

            <p class="text-muted mb-8 max-w-md">
              Property Pros is a family-owned business operated by brothers Steve and Kevin Spencer. With a shared commitment to quality craftsmanship and customer satisfaction, they've built Property Pros into Central Minnesota's trusted drywall contractor.
            </p>

            <!-- Big Stat -->
            <div class="mb-8">
              <div class="text-5xl lg:text-6xl font-light text-white mb-2">Family Owned</div>
              <div class="text-muted uppercase tracking-widest text-sm">& Locally Operated</div>
            </div>

            <a href="/contact" class="btn btn-outline-light">
              Work With Us
              <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
              </svg>
            </a>
          </div>

          <!-- Right: Team Grid (2-person layout) -->
          <div class="team-grid-duo">
            {hasSanityTeam ? (
              sanityTeamMembers.slice(0, 2).map((member) => (
                <div class="team-card-large">
                  {member.image ? (
                    <img
                      src={`${urlFor(member.image)}?w=400&h=400&fit=crop&auto=format`}
                      alt={member.name}
                      class="team-image"
                      loading="lazy"
                    />
                  ) : (
                    <div class="team-image bg-brand-navy/50 flex items-center justify-center">
                      <span class="text-4xl text-white/50">{member.name.charAt(0)}</span>
                    </div>
                  )}
                  <div class="team-info">
                    <div class="team-name">{member.name}</div>
                    <div class="team-role">{member.role}</div>
                  </div>
                </div>
              ))
            ) : (
              staticTeamMembers.map((member) => (
                <div class="team-card-large">
                  <img
                    src={member.image}
                    alt={member.alt}
                    class="team-image"
                    loading="lazy"
                  />
                  <div class="team-info">
                    <div class="team-name">{member.name}</div>
                    <div class="team-role">{member.role}</div>
                    <a href={`mailto:${member.email}`} class="team-email">{member.email}</a>
                  </div>
                </div>
              ))
            )}
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CONTACT SECTION -->
  <Contact />
</Layout>
